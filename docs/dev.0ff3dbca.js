parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"C9Ya":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e={Entify:{},globals:{},workerCount:0,async destroyWorker(r){await r.terminate(),e.workerCount--},createWorkers(r=5,o){let t=new Array(r);for(var s=0;s<r;s++)t[s]=new Worker(o);return e.workerCount+=r,t},doWork:(r,o,t)=>new Promise((s,n)=>{r.onmessage=s,r.onerror=n,r.postMessage({chunk:o,allData:t,fps:e.Entify.fps,globals:JSON.stringify(e.globals)})}),doInit(e,r,o){const t=o?[o]:void 0;return new Promise((s,n)=>{e.onmessage=s,e.onerror=n,e.postMessage({init:!0,data:r,transferrables:o},t)})},doDistributedWork(r,o){var t=o.length/r.length;return Promise.all(r.map((r,s)=>{const n=s*t,a=e.doWork(r,o.slice(n,n+t),o);return r.promise=a,a}))}};var r=e;exports.default=r;
},{}],"BRaK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./workers.js"));function e(t){return t&&t.__esModule?t:{default:t}}const o={};t.default.Entify=o,o.globals={},o.allEntities=[],o.Entity=function(){return this.id=(+new Date).toString(16)+(1e8*Math.random()|0).toString(16)+o.Entity.prototype.count,o.Entity.prototype.count++,this.components={},o.allEntities.push(this),this},o.Entity.prototype.count=0,o.Entity.destroy=function(t){const e=o.allEntities.findIndex(e=>e.id===t);e&&o.allEntities.splice(e,1)},o.Entity.prototype.print=function(){return console.log(JSON.stringify(this,null,4)),this},o.Entity.prototype.addComponent=function(t){return this.components[t.name]=t,this},o.Entity.prototype.removeComponent=function(t){var e=t;return"function"==typeof t&&(e=t.prototype.name),delete this.components[e],this},o.Components={},o.AllSystems=[],o.System=function(t){return this.setName(t),this.work=(()=>{}),this.setup=(()=>{}),this.postSetup=(()=>{}),this.cleanup=(()=>{}),this.globals=o.globals,o.AllSystems.push(this),this},o.System.prototype.setName=function(t){return this.name=t,this},o.System.prototype.workify=function(e,s,n){const i=this.setup.bind(this);this.setup=(async()=>{await i(),this.workers&&this.workers.length&&(this.workers.forEach(t=>{t.terminate()}),this.workers.length=0);const r=s||o.globals.workerCount;if(t.default.globals=o.globals,this.workers=t.default.createWorkers(r,e),n)for(let e of this.workers){const o=n();o&&await t.default.doInit(e,o.data,o.transferrables)}else;}),this.oldWork=this.work,this.work=(async()=>(await this.oldWork(),await t.default.doDistributedWork(this.workers,o.allEntities).then(t=>{let e=[];return t.forEach(t=>{e=e.concat(t.data)}),o.allEntities=e,t}))),this.oldCleanup=this.cleanup,this.cleanup=(async()=>{if(await this.oldCleanup(),this.workers&&this.workers.length){for(const t of this.workers)await t.promise;for(const e of this.workers)await t.default.destroyWorker(e);this.workers.length=0}})},o.start=(async()=>{for(const t of o.startSystems)await t.work(o.allEntities);for(const t of o.loopSystems)await t.setup();o.playing=!0,window.requestAnimationFrame(o.loop)}),o.restart=(async()=>{o.playing=!1,await o.reset(),window.requestAnimationFrame(o.start)}),o.pause=(()=>{o.playing=!1}),o.play=(()=>{o.playing=!0,window.requestAnimationFrame(o.loop)}),o.reset=(async()=>{for(const t of o.startSystems)await t.cleanup();for(const t of o.loopSystems)await t.cleanup();o.allEntities.length=0});let s=performance.now();o.loop=(async()=>{for(let s of o.loopSystems)await s.work(o.allEntities);const t=performance.now(),e=t-s;o.deltaTime=e;const n=e/1e3;o.fps=Math.round(1/n),s=t,o.playing&&window.requestAnimationFrame(o.loop)});var n=o;exports.default=n;
},{"./workers.js":"C9Ya"}],"JMsA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={levels:["Error","Warn","Info"],setLevel:function(l){e.level=l,l>e.levels.length-1?e.levelName="High":e.level<0?e.levelName="Off":e.levelName=e.levels[l]}};e.setLevel(0),e.info=function(){if(e.level>=2){for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];console.info("%c Info","color:#7e7",r)}},e.warn=function(){if(e.level>=1){for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];console.info("%c Warn","color:#ee7",r)}},e.error=function(){if(e.level>=0){for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];console.info("%c Error","color:#e77",r)}};var l=e;exports.default=l;
},{}],"04VM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("entify")),e=s(require("./tools/Log.js"));function s(t){return t&&t.__esModule?t:{default:t}}e.default.level=5;var a={};t.default.startSystems=[],t.default.loopSystems=[],a.addStartSystem=function(e){t.default.startSystems.push(e)},a.addStartSystems=function(e){t.default.startSystems=t.default.startSystems.concat(e)},a.addLoopSystem=function(e){t.default.loopSystems.push(e)},a.addLoopSystems=function(e){t.default.loopSystems=t.default.loopSystems.concat(e)},a.start=function(){e.default.info("starting systems"),t.default.start()},a.stop=function(){e.default.info("stopping systems"),t.default.pause()},a.play=function(){e.default.info("playing systems"),t.default.play()},a.reset=function(){e.default.info("Resetting systems"),t.default.restart()};var o=a;exports.default=o;
},{"entify":"BRaK","./tools/Log.js":"JMsA"}],"2u/B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./EGL.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r=e.default;exports.default=r;
},{"./EGL.js":"04VM"}],"iFoK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("entify"));function t(e){return e&&e.__esModule?e:{default:e}}var r=new e.default.System("CanvasWithPhysics2DStartup");r.work=function(){};var u=r;exports.default=u;
},{"entify":"BRaK"}],"kcoU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t){var e=t.components.world_position,n=t.components.canvas_triangle.width,o=t.components.canvas_triangle.angle,a=[];return[0+o,120+o,240+o].forEach(function(t,o){var r=n*Math.cos(t*Math.PI/180),s=n*Math.sin(t*Math.PI/180);a[o]=[e.x+r,e.y+s]}),a},e=t;exports.default=e;
},{}],"DCNT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,o,t){e.addEventListener("mousedown",function(e){t.push(["mousedown",e.layerX,e.layerY,e.button]),o.mouseDown&&o.mouseDown(e)}),e.addEventListener("mousemove",function(e){t.push(["mousemove",e.layerX,e.layerY,e.button]),o.mouseMove&&o.mouseMove(e)}),e.addEventListener("mouseup",function(){t.push(["mouseup",event.layerX,event.layerY,event.button]),o.mouseUp&&o.mouseUp(event)})},o=e;exports.default=o;
},{}],"x41D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("entify")),t=n(require("../Shape/Triangle.js")),a=n(require("./MouseEvents.js"));function n(e){return e&&e.__esModule?e:{default:e}}var o=new e.default.System("canvas2d");o.width=800,o.height=600,o.setup=function(){var e=document.createElement("canvas");e.width=o.width,e.height=o.height,e.id="eglCanvas",e.className="eglCanvas",document.body.appendChild(e),o.context=e.getContext("2d",{alpha:!1}),o.canvas=e,(0,a.default)(e,o.mouseCallbacks,[])},o.work=function(e){var a=o.canvas,n=o.context;n.clearRect(0,0,a.width,a.height),e.forEach(function(e){if(e.components.canvas_triangle&&e.components.world_position){var a=(0,t.default)(e),o=e.components.canvas_color;n.beginPath(),n.moveTo(a[0][0],a[0][1]),n.lineTo(a[1][0],a[1][1]),n.lineTo(a[2][0],a[2][1]),n.fillStyle="rgb(".concat(o.red,", ").concat(o.green,", ").concat(o.blue,")"),n.fill()}})};var c=o;exports.default=c;
},{"entify":"BRaK","../Shape/Triangle.js":"kcoU","./MouseEvents.js":"DCNT"}],"SsCo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,s,t){var o=Object.assign({},e);if(!o.components.physics_gravity.falling)return o.components.physics_velocity.x=0,o.components.physics_velocity.y=0,o;var c=s?s/1e3:0,i=t.g*t.scale*c;return o.components.physics_velocity.y+=i,o.components.physics_gravity.fallDuration+=c,o},s=e;exports.default=s;
},{}],"uueI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(o){var e=Object.assign({},o);return e.components.world_position.x+=o.components.physics_velocity.x,e.components.world_position.y+=o.components.physics_velocity.y,e},e=o;exports.default=e;
},{}],"E6T2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("entify"));function t(e){return e&&e.__esModule?e:{default:e}}var r=new e.default.System("World");r.setup=function(){r.height=600,r.width=800},r.work=function(e){};var u=r;exports.default=u;
},{"entify":"BRaK"}],"srfm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../World")),n=t(require("../Shape/Triangle.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(){var e,n,t=arguments[0]&&arguments[0].length,r=arguments.length,i=t,o=0;if(t){for(e=r;e--;)if(arguments[e].length!=t)return;for(;i--;){for(e=r,n=1;e--;)n*=arguments[e][i];o+=n}return o}}function i(e,n){if(3==e.length&&3==n.length)return[e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0]]}function o(e,n,t){return r(e,i(n,t))}function s(e,n,t){return i(e,i(n,t))}var c=function(t,r){var i=Object.assign({},t);if(i.components.physics_collision&&i.components.canvas_triangle){var o=(0,n.default)(i),s=i.components.physics_velocity.x,c=i.components.physics_velocity.y;if(i.components.physics_gravity&&i.components.physics_gravity.falling){var u=!1;o.forEach(function(n){n[0]+s>=e.default.width?(u=!0,!1):n[1]+c>=e.default.height&&(u=!0,!0)}),u&&(i.components.physics_gravity.falling=!1)}}return i},u=c;exports.default=u;
},{"../World":"E6T2","../Shape/Triangle.js":"kcoU"}],"BQnp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("entify")),o=i(require("./Gravity.js")),t=i(require("./Velocity.js")),s=i(require("./Collision.js"));function i(e){return e&&e.__esModule?e:{default:e}}var n=new e.default.System("Physics");n.scale=1,n.g=9.807,n.setup=function(){},n.work=function(i){i.forEach(function(r){r.components.physics_collision&&(r=(0,s.default)(r,i)),r.components.physics_gravity&&r.components.world_position&&(r=(0,o.default)(r,e.default.deltaTime,n)),r.components.physics_velocity&&r.components.world_position&&(r=(0,t.default)(r))})};var r=n;exports.default=r;
},{"entify":"BRaK","./Gravity.js":"SsCo","./Velocity.js":"uueI","./Collision.js":"srfm"}],"tdiK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../index.js")),s=r(require("../assemblages/system/CanvasWithPhysics2DStartup.js")),t=r(require("../systems/Canvas2d")),a=r(require("../systems/Physics")),u=r(require("../systems/World"));function r(e){return e&&e.__esModule?e:{default:e}}var d=function(r){t.default.mouseCallbacks=r,e.default.addStartSystem(s.default),e.default.addLoopSystems([t.default,a.default,u.default])},l=d;exports.default=l;
},{"../index.js":"2u/B","../assemblages/system/CanvasWithPhysics2DStartup.js":"iFoK","../systems/Canvas2d":"x41D","../systems/Physics":"BQnp","../systems/World":"E6T2"}],"d1YK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.red=e,this.green=t,this.blue=o};e.prototype.name="canvas_color";var t=e;exports.default=t;
},{}],"5poz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.width=e,this.angle=t};e.prototype.name="canvas_triangle";var t=e;exports.default=t;
},{}],"8jTs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=e,this.y=t};e.prototype.name="world_position";var t=e;exports.default=t;
},{}],"wXZj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.x=0,this.y=0};e.prototype.name="physics_velocity";var t=e;exports.default=t;
},{}],"CKXn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.magnitude=1,this.fallDuration=0,this.falling=!0};t.prototype.name="physics_gravity";var e=t;exports.default=e;
},{}],"1V2N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.mass=e};e.prototype.name="physics_collision";var t=e;exports.default=t;
},{}],"/J7p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("entify")),n=u(require("../../components/CanvasColor.js")),o=u(require("../../components/CanvasTriangle.js")),t=u(require("../../components/WorldPosition.js")),r=u(require("../../components/PhysicsVelocity.js")),d=u(require("../../components/PhysicsGravity.js")),s=u(require("../../components/PhysicsCollision.js"));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(u,a,i,l,p,c){var f=new e.default.Entity,m=i&&i.red>-1?i.red:255,y=i&&i.green>-1?i.green:255,C=i&&i.blue>-1?i.blue:255,v=l&&l.y?l.y:0,j=l&&l.x?l.x:0,q=p&&p.x?p.x:0,w=p&&p.y?p.y:0,x=c||0;return f.addComponent(new n.default(m,y,C)),f.addComponent(new o.default(u,a)),f.addComponent(new t.default(j,v)),f.addComponent(new r.default(q,w)),f.addComponent(new d.default(1)),f.addComponent(new s.default(x)),f},i=a;exports.default=i;
},{"entify":"BRaK","../../components/CanvasColor.js":"d1YK","../../components/CanvasTriangle.js":"5poz","../../components/WorldPosition.js":"8jTs","../../components/PhysicsVelocity.js":"wXZj","../../components/PhysicsGravity.js":"CKXn","../../components/PhysicsCollision.js":"1V2N"}],"/vRa":[function(require,module,exports) {
"use strict";var e=a(require("../src/index.js")),r=a(require("../src/templates/2dCanvasWithPhysicsAndMouse.js")),t=a(require("../src/assemblages/entity/Character.js"));function a(e){return e&&e.__esModule?e:{default:e}}var s={mouseDown:function(e){var r=function(e){return Math.floor(Math.random()*Math.floor(e))};new t.default(20,r(360),{red:r(255),green:r(255),blue:r(255)},{x:e.layerX,y:e.layerY})}};(0,r.default)(s),e.default.start();
},{"../src/index.js":"2u/B","../src/templates/2dCanvasWithPhysicsAndMouse.js":"tdiK","../src/assemblages/entity/Character.js":"/J7p"}]},{},["/vRa"], null)
//# sourceMappingURL=dev.0ff3dbca.js.map