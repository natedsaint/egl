parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"C9Ya":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e={Entify:{},globals:{},workerCount:0,async destroyWorker(r){await r.terminate(),e.workerCount--},createWorkers(r=5,o){let t=new Array(r);for(var s=0;s<r;s++)t[s]=new Worker(o);return e.workerCount+=r,t},doWork:(r,o,t)=>new Promise((s,n)=>{r.onmessage=s,r.onerror=n,r.postMessage({chunk:o,allData:t,fps:e.Entify.fps,globals:JSON.stringify(e.globals)})}),doInit(e,r,o){const t=o?[o]:void 0;return new Promise((s,n)=>{e.onmessage=s,e.onerror=n,e.postMessage({init:!0,data:r,transferrables:o},t)})},doDistributedWork(r,o){var t=o.length/r.length;return Promise.all(r.map((r,s)=>{const n=s*t,a=e.doWork(r,o.slice(n,n+t),o);return r.promise=a,a}))}};var r=e;exports.default=r;
},{}],"BRaK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./workers.js"));function e(t){return t&&t.__esModule?t:{default:t}}const o={};t.default.Entify=o,o.globals={},o.allEntities=[],o.Entity=function(){return this.id=(+new Date).toString(16)+(1e8*Math.random()|0).toString(16)+o.Entity.prototype.count,o.Entity.prototype.count++,this.components={},o.allEntities.push(this),this},o.Entity.prototype.count=0,o.Entity.destroy=function(t){const e=o.allEntities.findIndex(e=>e.id===t);e&&o.allEntities.splice(e,1)},o.Entity.prototype.print=function(){return console.log(JSON.stringify(this,null,4)),this},o.Entity.prototype.addComponent=function(t){return this.components[t.name]=t,this},o.Entity.prototype.removeComponent=function(t){var e=t;return"function"==typeof t&&(e=t.prototype.name),delete this.components[e],this},o.Components={},o.AllSystems=[],o.System=function(t){return this.setName(t),this.work=(()=>{}),this.setup=(()=>{}),this.postSetup=(()=>{}),this.cleanup=(()=>{}),this.globals=o.globals,o.AllSystems.push(this),this},o.System.prototype.setName=function(t){return this.name=t,this},o.System.prototype.workify=function(e,s,n){const i=this.setup.bind(this);this.setup=(async()=>{await i(),this.workers&&this.workers.length&&(this.workers.forEach(t=>{t.terminate()}),this.workers.length=0);const r=s||o.globals.workerCount;if(t.default.globals=o.globals,this.workers=t.default.createWorkers(r,e),n)for(let e of this.workers){const o=n();o&&await t.default.doInit(e,o.data,o.transferrables)}else;}),this.oldWork=this.work,this.work=(async()=>(await this.oldWork(),await t.default.doDistributedWork(this.workers,o.allEntities).then(t=>{let e=[];return t.forEach(t=>{e=e.concat(t.data)}),o.allEntities=e,t}))),this.oldCleanup=this.cleanup,this.cleanup=(async()=>{if(await this.oldCleanup(),this.workers&&this.workers.length){for(const t of this.workers)await t.promise;for(const e of this.workers)await t.default.destroyWorker(e);this.workers.length=0}})},o.start=(async()=>{for(const t of o.startSystems)await t.work(o.allEntities);for(const t of o.loopSystems)await t.setup();o.playing=!0,window.requestAnimationFrame(o.loop)}),o.restart=(async()=>{o.playing=!1,await o.reset(),window.requestAnimationFrame(o.start)}),o.pause=(()=>{o.playing=!1}),o.play=(()=>{o.playing=!0,window.requestAnimationFrame(o.loop)}),o.reset=(async()=>{for(const t of o.startSystems)await t.cleanup();for(const t of o.loopSystems)await t.cleanup();o.allEntities.length=0});let s=performance.now();o.loop=(async()=>{for(let s of o.loopSystems)await s.work(o.allEntities);const t=performance.now(),e=t-s;o.deltaTime=e;const n=e/1e3;o.fps=Math.round(1/n),s=t,o.playing&&window.requestAnimationFrame(o.loop)});var n=o;exports.default=n;
},{"./workers.js":"C9Ya"}],"JMsA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={levels:["Error","Warn","Info"],setLevel:function(l){e.level=l,l>e.levels.length-1?e.levelName="High":e.level<0?e.levelName="Off":e.levelName=e.levels[l]}};e.setLevel(0),e.info=function(){if(e.level>=2){for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];console.info("%c Info","color:#7e7",r)}},e.warn=function(){if(e.level>=1){for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];console.info("%c Warn","color:#ee7",r)}},e.error=function(){if(e.level>=0){for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];console.info("%c Error","color:#e77",r)}};var l=e;exports.default=l;
},{}],"04VM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("entify")),e=s(require("./tools/Log.js"));function s(t){return t&&t.__esModule?t:{default:t}}e.default.level=5;var a={};t.default.startSystems=[],t.default.loopSystems=[],a.addStartSystem=function(e){t.default.startSystems.push(e)},a.addStartSystems=function(e){t.default.startSystems=t.default.startSystems.concat(e)},a.addLoopSystem=function(e){t.default.loopSystems.push(e)},a.addLoopSystems=function(e){t.default.loopSystems=t.default.loopSystems.concat(e)},a.start=function(){e.default.info("starting systems"),t.default.start()},a.stop=function(){e.default.info("stopping systems"),t.default.pause()},a.play=function(){e.default.info("playing systems"),t.default.play()},a.reset=function(){e.default.info("Resetting systems"),t.default.restart()};var o=a;exports.default=o;
},{"entify":"BRaK","./tools/Log.js":"JMsA"}],"2u/B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./EGL.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r=e.default;exports.default=r;
},{"./EGL.js":"04VM"}]},{},["2u/B"], null)
//# sourceMappingURL=src.c1e70db6.js.map